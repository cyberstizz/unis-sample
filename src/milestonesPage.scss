// MilestonesPage.scss

// Unis theme variables
$bg-black: #000000;
$text-silver: #C0C0C0;
$text-gray: #A9A9A9;
$accent-white: #FFFFFF;
$border-silver: #C0C0C0;
$button-hover: #D3D3D3;
$unis-blue: #163387;
$unis-silver: #918f8f;

// --- Keyframes for Prestige Animation ---
@keyframes prestigeFadeIn {
  0% { opacity: 0; transform: translateY(30px) scale(0.95); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes artworkPop {
  0% { opacity: 0; transform: scale(0.8) rotate(-2deg); filter: blur(10px); }
  60% { transform: scale(1.05) rotate(1deg); }
  100% { opacity: 1; transform: scale(1) rotate(0); filter: blur(0); }
}

@keyframes textSlideUp {
  0% { opacity: 0; transform: translateY(20px); }
  100% { opacity: 1; transform: translateY(0); }
}

@keyframes shineEffect {
  0% { left: -100%; }
  100% { left: 200%; }
}

@keyframes listCascade {
  0% { opacity: 0; transform: translateX(-20px); }
  100% { opacity: 1; transform: translateX(0); }
}

.milestones-page-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100vh;
  background: $bg-black;
  color: $text-gray;
  padding: 5px 0;
  padding-top: 7%;
  overflow-y: auto;
  font-family: sans-serif;
  background: transparent;
  margin-left: 270px;
  margin-top: .2%;
}

.content-wrapper {
  width: 100%;
  max-width: 900px;
  padding: 0 20px;
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.filter-card {
  background: rgba($unis-blue, 0.8);
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
  border: 1px solid $border-silver;
  z-index: 10;
}

.filter-controls {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 15px;
}

.filter-select {
  background: $bg-black;
  border: 1px solid $border-silver;
  color: $accent-white;
  padding: 10px 15px;
  border-radius: 50px;
  font-size: 14px;
  cursor: pointer;
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12"><path fill="%23C0C0C0" d="M6 9l-4-4h8z"/></svg>');
  background-repeat: no-repeat;
  background-position: right 10px center;

  &:hover {
    border-color: $text-silver;
  }
}

.view-button {
  padding: 12px 30px;
  background: transparent;
  border: 1px solid $text-silver;
  color: $text-silver;
  border-radius: 50px;
  cursor: pointer;
  font-weight: bold;
  transition: all 0.3s ease;

  &:hover:not(:disabled) {
    background: $accent-white;
    color: $bg-black;
    box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
  }

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
}

.winner-highlight {
  position: relative;
  margin: 40px auto 30px;
  margin-top: 1%;
  width: 100%;
  max-width: 95%;
  border-radius: 20px;
  overflow: hidden; // Keeps the blur inside
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
  
  // Animation Trigger
  animation: prestigeFadeIn 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;

  // The Ambient Glow Layer
  .ambient-glow {
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background-size: cover;
    background-position: center;
    filter: blur(80px) saturate(180%); // Heavy blur for color extraction
    opacity: 0.5;
    z-index: 0;
    transition: background-image 0.5s ease;
  }

  // The Glassmorphism Content Layer
  .winner-content-glass {
    position: relative;
    z-index: 1;
    background: rgba(10, 10, 10, 0.65); // Dark glass overlay
    backdrop-filter: blur(20px); // Frosted glass effect
    padding: 30px;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  .winner-header-animate {
    animation: textSlideUp 0.8s 0.2s cubic-bezier(0.2, 0.8, 0.2, 1) both;
  }

  .winner-title {
    font-size: 2.5rem;
    color: #ffffff;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 1px;
    text-shadow: 0 2px 10px rgba(0,0,0,0.5);
    margin-bottom: 5px;
  }

  .winner-artist {
    font-size: 1.5rem;
    color: $text-silver;
    margin-bottom: 5px;
  }

  .winner-jurisdiction {
    font-size: 0.9rem;
    color: rgba(255, 255, 255, 0.6);
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 20px;
  }

  .winner-artwork-wrapper {
    position: relative;
    margin: 10px 0 25px;
    border-radius: 12px;
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.6);
    animation: artworkPop 1s 0.1s cubic-bezier(0.34, 1.56, 0.64, 1) both; // "Elastic" pop effect
    overflow: hidden;
    
    // --- UPDATED IMAGE STYLING ---
    .winner-artwork {
      width: 100%;
      max-width: 350px;    // Universal standard size (slightly reduced from 400 for balance)
      aspect-ratio: 1 / 1; // Forces a perfect square regardless of the upload
      object-fit: cover;   // "Smart Crops" the image to fill the square without stretching
      display: block;
      border-radius: 12px;
    }

    // Shine sweeping across artwork
    .artwork-shine {
      position: absolute;
      top: 0;
      left: -100%;
      width: 50%;
      height: 100%;
      background: linear-gradient(
        to right,
        rgba(255,255,255,0) 0%,
        rgba(255,255,255,0.3) 50%,
        rgba(255,255,255,0) 100%
      );
      transform: skewX(-25deg);
      animation: shineEffect 1.5s 1.2s ease-in-out;
    }
  }

  .winner-stats-animate {
    animation: textSlideUp 0.8s 0.4s cubic-bezier(0.2, 0.8, 0.2, 1) both;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .winner-stats {
    display: flex;
    justify-content: center;
    gap: 2rem;
    margin-bottom: 1.5rem;
    background: rgba(255, 255, 255, 0.05);
    padding: 15px 30px;
    border-radius: 50px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    
    .stat {
      display: flex;
      flex-direction: column;
      align-items: center;
      
      .stat-value {
        font-size: 1.4rem;
        font-weight: bold;
        color: #fff;
      }
      
      .stat-label {
        font-size: 0.7rem;
        text-transform: uppercase;
        color: rgba(255, 255, 255, 0.6);
        letter-spacing: 1px;
      }
    }
  }

  .winner-caption {
    font-size: 1.2rem;
    font-style: italic;
    color: rgba(255, 255, 255, 0.8);
    margin-top: 15px;
    font-family: serif;
  }
}

.milestone-caption {
  margin: 1.5rem 0;
  padding: 0 .1rem !important;
  background: transparent;
  text-align: center;
  position: relative;
  z-index: 2; // Ensure it sits above any ambient glow

  // Wrapper from the JSX
  h2 {
    font-weight: 300;
    margin: 0;
    width: 100%;
  }

  // The Location/Genre text
  .caption-top {
    font-size: 1rem;
    color: #a9a9a9; // text-gray
    text-transform: uppercase;
    letter-spacing: 3px;
    margin-bottom: 5px;
  }

  // "ARTIST OF THE DAY"
  .dramaticEffect {
    display: block;
    font-size: 2rem;
    font-weight: 800;
    // Gradient text for premium feel
    background: linear-gradient(to right, #ffffff, #c0c0c0); 
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin: 5px 0;
    text-shadow: 0 4px 10px rgba(0,0,0,0.5);

    @media (max-width: 600px) {
      font-size: 1.5rem;
    }
  }

  // The Grandfather Proof - Electric Blue Date
  .milestone-date {
    font-size: 1.1rem;
    font-weight: bold;
    color: #4facfe; // Bright electric blue
    text-transform: uppercase;
    letter-spacing: 1.5px;
    margin-top: 8px;
    padding: 5px 15px;
    display: inline-block;
    
    // Optional: Add a subtle border/glow to make it look like a stamp
    border-bottom: 1px solid rgba(79, 172, 254, 0.3);
    text-shadow: 0 0 10px rgba(79, 172, 254, 0.5);
  }
}

.results-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.result-item {
  background: rgba(20, 20, 20, 0.8);
  border-radius: 12px;
  padding: 20px;
  display: flex;
  align-items: center;
  gap: 15px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  transition: transform 0.2s, background 0.2s;
  
  // Cascade Animation
  animation: listCascade 0.5s ease-out forwards;
  opacity: 0; // Start invisible

  &:hover {
    transform: translateX(5px);
    background: rgba(30, 30, 30, 0.9);
    border-color: $text-silver;
  }
}

// ... Keep existing badge styles ...
.badge {
  display: inline-block;
  padding: 0.25rem 0.75rem;
  border-radius: 1rem;
  font-size: 0.75rem;
  font-weight: 600;
  margin: 0.25rem;
  
  &.votes { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
  &.tiebreaker { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; }
  &.tiebreaker.plays { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
  &.tiebreaker.likes { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
  &.tiebreaker.score { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); color: #333; }
  &.tiebreaker.seniority { background: linear-gradient(135deg, #d299c2 0%, #fef9d7 100%); color: #333; }
  &.fallback { background: rgba(255, 255, 255, 0.2); color: rgba(255, 255, 255, 0.8); border: 1px solid rgba(255, 255, 255, 0.3); }
}

.rank {
  font-size: 28px;
  font-weight: bold;
  color: #444; // Subtle rank color
  min-width: 40px;
}

.item-artwork {
  width: 60px;
  height: 60px;
  border-radius: 8px;
  object-fit: cover;
}

.item-info {
  flex-grow: 1;
  .item-title { font-size: 18px; font-weight: bold; color: $text-silver; }
  .item-artist { font-size: 14px; color: $text-gray; }
}

.item-stats {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  .points { font-weight: bold; color: #667eea; }
}

// Mobile
@media (max-width: 600px) {
  .milestones-page-container {
    padding-top: 32%;
    width: 90vw;
    margin-left: 5px;
  }
  
  .filter-controls { flex-direction: column; width: 100%; }
  .filter-select, .view-button { width: 100%; }

  .winner-highlight {
    .winner-title { font-size: 1.8rem; }
    .winner-stats { gap: 1rem; padding: 10px; }
    .winner-stats .stat-value { font-size: 1.1rem; }
  }

  .result-item {
    padding: 12px;
    .rank { display: none; }
    .item-stats { display: none; } 
  }
}